Iteration 10
Timestamp: 2026-01-19T16:47:33.581651
Success: False

============================================================
STDOUT:
============================= test session starts =============================
platform win32 -- Python 3.14.2, pytest-9.0.2, pluggy-0.1.dev931+gddab52cb9
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\Users\ronal\colorame_rename_testing
configfile: pyproject.toml
plugins: anyio-4.12.1, hypothesis-6.148.8, benchmark-5.2.3, cov-7.0.0
collected 53 items

colorama\tests\ansi_test.py ...                                          [  5%]
colorama\tests\ansitowin32_test.py .......................               [ 49%]
colorama\tests\initialise_test.py ssssssssssF.                           [ 71%]
colorama\tests\isatty_test.py .......                                    [ 84%]
colorama\tests\winterm_test.py ........                                  [100%]

================================== FAILURES ===================================
_____________ JustFixWindowsConsoleTest.testJustFixWindowsConsole _____________

self = <colorama.tests.initialise_test.JustFixWindowsConsoleTest testMethod=testJustFixWindowsConsole>

    @patch("colorama.ansitowin32.winapi_test", lambda: True)
    def testJustFixWindowsConsole(self):
        if sys.platform != "win32":
            # just_fix_windows_console should be a no-op
            just_fix_windows_console()
            self.assertIs(sys.stdout, orig_stdout)
            self.assertIs(sys.stderr, orig_stderr)
        else:
            def fake_std():
                # Emulate stdout=not a tty, stderr=tty
                # to check that we handle both cases correctly
                stdout = Mock()
                stdout.closed = False
                stdout.isatty.return_value = False
                stdout.fileno.return_value = 1
                sys.stdout = stdout
    
                stderr = Mock()
                stderr.closed = False
                stderr.isatty.return_value = True
                stderr.fileno.return_value = 2
                sys.stderr = stderr
    
            for native_ansi in [False, True]:
                with patch(
                    'colorama.ansitowin32.enable_vt_processing',
                    lambda *_: native_ansi
                ):
                    self._reset()
                    fake_std()
    
                    # Regular single-call test
                    prev_stdout = sys.stdout
                    prev_stderr = sys.stderr
                    just_fix_windows_console()
>                   self.assertIs(sys.stdout, prev_stdout)
E                   AssertionError: <colorama.ansitowin32.AnsiToWin32 object at 0x00000226E3F178B0> is not <Mock id='2366056132496'>

colorama\tests\initialise_test.py:159: AssertionError
=========================== short test summary info ===========================
FAILED colorama/tests/initialise_test.py::JustFixWindowsConsoleTest::testJustFixWindowsConsole
================== 1 failed, 42 passed, 10 skipped in 0.47s ===================

============================================================
STDERR:
